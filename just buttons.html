<!DOCTYPE html>

<html lang="en" xmlns="http://www.w3.org/1999/xhtml">
<head>
    <meta charset="utf-8" />
    <title>Reaction Game</title>
    <link rel="stylesheet" type="text/css" href="main.css" />
    <link href='http://fonts.googleapis.com/css?family=Open+Sans:700' rel='stylesheet' type='text/css'>
    <script language="JavaScript">
        //variabler
        nyFunktion = 0;
        q = 0;
        ad = 0;
        fuskKoll = 0;
        setInterval(function () {
            console.log(fuskKoll, nyFunktion);
        }, 500)
        //ingen aning
        function rnd() {
            r1 = new Date();
            num = Math.round(Math.abs(Math.sin(r1.getTime()) * 10000000)) % 5;
            return num;
        }
        //Den här functionen start gör både start och stopp momenten
        function start() {
            //första delen startar allt
            if ( nyFunktion == 0 ) {
                if (q == 1) { return }
                c = 0;
                ad = 0;
                da = 0;
                setTimeout("spel()", 1000 + 1000 * rnd());
                document.ful.text8.src = "redCirc.png";
                document.ful.text2.value = ""
                nyFunktion = 2;
                fuskKoll = 0;
            }
            //andra delen stoppar allt
            if (nyFunktion == 1) {
                if (da == 1) { return }
                if (ad == 1) { return }
                if (q == 1) { return }
                if (c == 0) { fusk() }
                if (c == 0) { return }
                if (fuskKoll != 2) { document.ful.text8.src = "greenCircCheck.png"; nyFunktion = 0; }
                da = 1
                rak();
                
                fuskKoll = -1;
            }
        }
        function kollaFusk() {
            fuskKoll = fuskKoll + 1;
            if (fuskKoll == 2) { fusk() }
            if (fuskKoll == 2) { return }
        }

        //vet inte vad denna gör 
        function rak() {
            slutTime = new Date();
            sltid = slutTime.getTime();
            tidpo = (sltid - stid) / 1000
            if (ad == 1) tidpo = 2;
            as = ""; if (tidpo < 1) as = "0"
            if (ad == 0) {
                document.ful.text1.value = "Reaction time: " + as + tidpo + " seconds"
                document.ful.text8.value = "Push Start";
            }
        }

        //ingen aning här heller
        function spel() {
            if (ad == 1) return
            nyFunktion = 1;
            c = 1;
            startTime = new Date();
            stid = startTime.getTime();
            document.ful.text8.src = "greenCirc.png";
        }

        //fusk funktionen
        function fusk() {
            nyFunktion = 0;
            document.ful.text2.value = "Too early! Start again."
            document.ful.text8.src = "redCircFusk.png";
            ad = 1
            stid = 0;
            rak();
            fuskKoll = 0;
        }
    </script>
</head>
<body>


            <center>
                <form name="ful">
                    <input class="displayArea" size="30" name="text1" value="Reaction time:"><br>
                    <input class="displayArea" size=" 30" name="text2" /><br />
                    <img src="redCircClick.png" name="text8" height="400" width="400" onclick="start(), kollaFusk()" /><br>
                        <input type="button" value="Start/stop" onclick="start()">
                </form>
            </center>

        </body>
</html>